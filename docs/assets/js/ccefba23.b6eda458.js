"use strict";(self.webpackChunkmcp_workshop=self.webpackChunkmcp_workshop||[]).push([[266],{7858:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"mcp-concepts/client","title":"Creating a client","description":"To create a client, we\'ll use a similar set up as with the server.","source":"@site/docs/mcp-concepts/client.md","sourceDirName":"mcp-concepts","slug":"/mcp-concepts/client","permalink":"/docs/mcp-concepts/client","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/mcp-concepts/client.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"A first MCP server","permalink":"/docs/mcp-concepts/first-server"},"next":{"title":"LLM Client","permalink":"/docs/mcp-concepts/llm-client"}}');var o=r(4848),s=r(8453);const l={sidebar_position:3},i="Creating a client",c={},d=[{value:"Run the client",id:"run-the-client",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"creating-a-client",children:"Creating a client"})}),"\n",(0,o.jsx)(n.p,{children:"To create a client, we'll use a similar set up as with the server."}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Create a ",(0,o.jsx)(n.code,{children:"client"})," folder in the root directory of your project."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"mkdir client\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Initialize a new Node.js project in the ",(0,o.jsx)(n.code,{children:"client"})," folder:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"cd client\r\nnpm init -y\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Update the ",(0,o.jsx)(n.code,{children:"package.json"})," file to include the following:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\r\n  "name": "client",\r\n  "version": "1.0.0",\r\n  "main": "index.js",\r\n  "scripts": {\r\n    "test": "echo \\"Error: no test specified\\" && exit 1",\r\n    "build": "tsc && node ./build/index.js"\r\n  },\r\n  "keywords": [],\r\n  "author": "",\r\n  "license": "ISC",\r\n  "dependencies": {\r\n    "@modelcontextprotocol/sdk": "^1.8.0"\r\n  },\r\n  "devDependencies": {\r\n    "@types/node": "^22.13.17",\r\n    "typescript": "^5.8.2"\r\n  },\r\n  "description": ""\r\n}\n'})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Create a ",(0,o.jsx)(n.code,{children:"tsconfig.json"})," file in the ",(0,o.jsx)(n.code,{children:"client"})," folder with the following content:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\r\n "compilerOptions": {\r\n   "target": "ES2022",\r\n   "module": "Node16",\r\n   "moduleResolution": "Node16",\r\n   "outDir": "./build",\r\n   "rootDir": "./src",\r\n   "strict": true,\r\n   "esModuleInterop": true,\r\n   "skipLibCheck": true,\r\n   "forceConsistentCasingInFileNames": true\r\n },\r\n "include": ["src/**/*"],\r\n "exclude": ["node_modules"]\r\n}\n'})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Install the necessary dependencies:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"npm install @modelcontextprotocol/sdk zod\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Create a ",(0,o.jsx)(n.code,{children:"src"})," folder in the ",(0,o.jsx)(n.code,{children:"client"})," directory:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"mkdir src\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Create a file named ",(0,o.jsx)(n.code,{children:"index.ts"})," in the ",(0,o.jsx)(n.code,{children:"src"})," folder:"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Add the following code to ",(0,o.jsx)(n.code,{children:"index.ts"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:' import { Client } from "@modelcontextprotocol/sdk/client/index.js";\r\n import { StdioClientTransport } from "@modelcontextprotocol/sdk/client/stdio.js";\r\n \r\n async function main() {\r\n\r\n     const transport = new StdioClientTransport({\r\n         command: "node",\r\n         args: ["../build/index.js"]\r\n     });\r\n \r\n     const client = new Client(\r\n     {\r\n         name: "example-client",\r\n         version: "1.0.0"\r\n     },\r\n     {\r\n         capabilities: {\r\n         prompts: {},\r\n         resources: {},\r\n         tools: {}\r\n         }\r\n     }\r\n    );\r\n \r\n    await client.connect(transport);\r\n\r\nmain().catch((error) => {\r\n  console.error("Fatal error: ", error);\r\n  process.exit(1);\r\n});\n'})}),"\n",(0,o.jsx)(n.p,{children:"In the preceding code:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"Client"})," class is imported from the ",(0,o.jsx)(n.code,{children:"@modelcontextprotocol/sdk/client/index.js"})," module."]}),"\n",(0,o.jsxs)(n.li,{children:["An instance of ",(0,o.jsx)(n.code,{children:"StdioClientTransport"})," is created, which will be used to communicate with the server."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"Client"})," instance is created with a name and version, and an empty capabilities object. We will add prompts, resources, and tools to the capabilities object as needed."]}),"\n",(0,o.jsxs)(n.li,{children:["A connection to the server is established using the ",(0,o.jsx)(n.code,{children:"connect"})," method of the ",(0,o.jsx)(n.code,{children:"Client"})," instance, passing in the transport instance."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"At this point, we're not doing anything with the client yet. To interact with the server, we need to implement the logic for sending requests for prompts, resources, and tools. This will be done in the next steps."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Add the following code to the ",(0,o.jsx)(n.code,{children:"main"})," function to query the server for its tools:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:'console.log("TOOLS");\r\nconst tools = await client.listTools();\r\ntools.tools.forEach((tool) => {\r\n     console.log("Tool: ", tool.name);\r\n});\n'})}),"\n",(0,o.jsx)(n.p,{children:"In the preceding code:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"listTools"})," method of the ",(0,o.jsx)(n.code,{children:"Client"})," instance is called to retrieve the list of available tools from the server."]}),"\n",(0,o.jsx)(n.li,{children:"Thereafter the tools are printed to the console."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Let's invoke the ",(0,o.jsx)(n.code,{children:"add"})," tool we created in the server. Add the following code to the ",(0,o.jsx)(n.code,{children:"main"})," function:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:'// Call a tool\r\nconsole.log("CALL TOOL");\r\n const result = await client.callTool({\r\n     name: "add",\r\n     arguments: {\r\n         a: 2,\r\n         b: 2\r\n     }\r\n });\r\n\r\nconsole.log("\\tResult: ", result);\n'})}),"\n",(0,o.jsx)(n.p,{children:"In the preceding code:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"callTool"})," method of the ",(0,o.jsx)(n.code,{children:"Client"})," instance is called to invoke the ",(0,o.jsx)(n.code,{children:"add"})," tool on the server."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"callTool"})," takes an object with the tool name and arguments as parameters."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Your code so far should look like this:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:'import { Client } from "@modelcontextprotocol/sdk/client/index.js";\r\nimport { StdioClientTransport } from "@modelcontextprotocol/sdk/client/stdio.js";\r\n\r\nasync function main() {\r\n\r\n    const transport = new StdioClientTransport({\r\n        command: "node",\r\n        args: ["../build/index.js"]\r\n    });\r\n\r\n    const client = new Client(\r\n    {\r\n        name: "example-client",\r\n        version: "1.0.0"\r\n    },\r\n    {\r\n        capabilities: {\r\n        prompts: {},\r\n        resources: {},\r\n        tools: {}\r\n        }\r\n    }\r\n    );\r\n\r\n    await client.connect(transport);\r\n\r\n    console.log("TOOLS");\r\n    const tools = await client.listTools();\r\n    tools.tools.forEach((tool) => {\r\n        console.log("Tool: ", tool.name);\r\n    });\r\n\r\n    // Call a tool\r\n    console.log("CALL TOOL");\r\n    const result = await client.callTool({\r\n        name: "add",\r\n        arguments: {\r\n            a: 2,\r\n            b: 2\r\n        }\r\n    });\r\n\r\n    console.log("\\tResult: ", result);\r\n}\r\n\r\nmain().catch((error) => {\r\n    console.error("Fatal error: ", error);\r\n    process.exit(1);\r\n});\n'})}),"\n",(0,o.jsx)(n.h2,{id:"run-the-client",children:"Run the client"}),"\n",(0,o.jsx)(n.p,{children:"To run the client type the following command in the terminal (make sure you stand in the client directory):"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"npm run build\n"})}),"\n",(0,o.jsx)(n.p,{children:"You should see the following output:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"TOOLS\r\nTool:  add\r\nCALL TOOL\r\n    Result:  { content: [ { type: 'text', text: '4' } ] }\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Next, let's show how we can improve the client to use a large language model (LLM). The idea is to let the user use a natural language prompt. Through tool calling, the LLM will be able to call the ",(0,o.jsx)(n.code,{children:"add"})," tool we created in the server."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>i});var t=r(6540);const o={},s=t.createContext(o);function l(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);